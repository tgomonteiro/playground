<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playground</title>
</head>
<body>
  <button id="okButton">GO TO GYMPASS</button>
  <script>
    const button = document.querySelector('#okButton');

    function handleButton() {
      this.disabled = true;
      this.innerHTML = 'LOADING...'

      const userAgent = navigator.userAgent.toLowerCase();
      const isAndroid = userAgent.includes('android');

      const now = new Date().valueOf();

      window.location.replace(isAndroid
        ? 'gympass://gympass/keycloak_authorizer?action_token=1234'
        : 'gympass://keycloak_authorizer?action_token=1234');

      setTimeout(() => {
        if (new Date().valueOf() - now > 100) return;
        window.location.replace(isAndroid
          ? 'https://play.google.com/store/apps/details?id=com.gympass'
          : 'https://apps.apple.com/app/gympass/id703761434'
        );
      }, 25);
    };

    button.addEventListener('click', handleButton);
  </script>
</body>
</html>
